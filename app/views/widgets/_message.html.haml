.message-head
  - if message.user.present?
    = image_tag(message.user.avatar_url, :class => 'avatar-small', alt: message.user.name)
    %strong
      = message.user.name
  - else
    %strong
      = message.from
  %span.pull-right
    = timeago message.created_at

.message-body
  .message-text<= message.html? ? html_unescape(stripped_html) : stripped_plain
  - if hide_quoted_text
    .message-text-full<= message.html? ? html_unescape(body_html) : body_plain
    %button.btn.btn-small.show-quoted-text{:alt => "show quoted text"} &middot; &middot; &middot;

.message-attachments
  - message.attachments.each do |attachment|
    = render_widget :attachment_preview, attachment

.message-actions

  = presenter.link_to_toggle(:shareworthy) do
    %i.icon-bullhorn
    shareworthy
  = presenter.link_to_toggle(:knowledge) do
    %i.icon-book
    knowledge
