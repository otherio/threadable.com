<div class="group-settings organization-settings scrollable">
  <div>
    <form class="uk-form" {{action updateOrganization on='submit'}}>

      <h3 class="uk-text-bold">Organization Settings</h3>
      {{#if error}}
        <h3>Error: {{error}}</h3>
      {{/if}}

    </form>

    {{#if isPaid}}
      <div>
        <h4 class="uk-text-bold">Google Apps domain connection</h4>
        <p>
          {{#if googleUser}}
            <b>Connected using:</b>
            <br/>
            {{googleUser.name}} &lt;{{googleUser.emailAddress}}&gt;
          {{else}}
            This organization is not connected to a Google Apps domain.
          {{/if}}
        </p>

        <p>
          {{#if currentUserIsGoogleUser}}
            (your account)
          {{else}}
            {{#if hasGoogleAuth}}
              <button {{action claimGoogleAccount}} class="uk-button uk-button-primary">Connect to my Google account</button>
            {{else}}
              To connect your Google Apps domain admin account, visit your <a href="/profile">profile</a>.
            {{/if}}
          {{/if}}
        </p>
      </div>

      <div>
        <h4 class="uk-text-bold">Your domains</h4>
        <p>
          Your organization can receive email at all of the following domains.
          Messages will be sent using the outgoing domain.
        </p>
        <ul class='uk-list uk-list-striped email-domains'>
          <li>
            <span class="controls default">
              {{#if internalDomainOutgoing}}
                <i class="uk-icon-arrow-circle-right"></i> outgoing
              {{else}}
                <a {{action "outgoingDomain" "none"}}>set outgoing</a>
              {{/if}}
            </span>
            {{emailAddressUsername}}.threadable.com
          </li>

          {{#each emailDomain in sortedDomains}}
            <li>
              <span class="controls">
                {{#if emailDomain.outgoing}}
                  <i class="uk-icon-arrow-circle-right"></i> outgoing
                {{else}}
                  <a {{action "outgoingDomain" emailDomain}}>set outgoing</a>
                {{/if}}
                <a {{action "deleteDomain" emailDomain}}><i class='uk-icon-times'></i></a>
              </span>
              {{emailDomain.domain}}
            </li>
          {{/each}}
        </ul>

        <form class="uk-form" {{action addDomain on='submit'}}>
          <fieldset>
            <div class="uk-form-row">
              <label class="uk-text-bold uk-form-label input-label">
                New Domain:
              </label>
              <div class="uk-form-controls input-field">
                {{input value=domain name="domain"}}
              </div>
            </div>

            <div class="uk-form-row">
              <input type="submit" class="uk-button uk-button-primary" value="Add"></input>
            </div>

          </fieldset>
        </form>
      </div>

    {{else}}
      <p>
        Right now, there are only settings for Pro-level features.
      </p>

      <p>
        With a Threadable Pro account, you can:
        <ul>
          <li>Use a custom email domain</li>
          <li>Connect Threadable to Google Apps</li>
          <li>More soon!</li>
        </ul>
        <a href="mailto:support@threadable.com">Contact us</a> to get in on the Threadable Pro beta program!
      </p>
    {{/if}}

  </div>
</div>
